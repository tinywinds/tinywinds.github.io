
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tinywind</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Tinywind">
<meta property="og:url" content="http://tinywind.cn/page/3/index.html">
<meta property="og:site_name" content="Tinywind">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Nathan">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Tinywind" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
<meta name="generator" content="Hexo 4.2.0"></head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tinywind</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="tinywind.cn">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-disdain-chain" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/16/disdain-chain/" class="article-date">
  <time datetime="2018-11-16T06:25:37.000Z" itemprop="datePublished">2018-11-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/16/disdain-chain/">程序员鄙视链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>懂 Functional Programming 的工程师鄙视老是把设计模式挂在嘴边的工程师，老是把设计模式挂在嘴边的工程师鄙视会说「你这样写就不 OO 了啊」的工程师，会说「你这样写就不 OO 了啊」的工程师鄙视会说「哈？什么物件导向？不是把重复的 code 写成一个 function 就好了吗？」的工程师，会说「哈？什么物件导向？不是把重复的 code 写成一个 function 就好了吗？」的工程师鄙视把同一段 code 到处复制贴上的工程师，把同一段 code 到处复制贴上的工程师鄙视 PM。</p>
<p>写静态语言的工程师鄙视写动态语言的工程师。</p>
<p>写组合语言的工程师鄙视写 C 语言的工程师，C 语言工程师鄙视 C++ 工程师，C++ 工程师鄙视 Java 和 C# 工程师，Java 工程师和 C# 工程师则互相鄙视，而 C# 工程师又鄙视 Visual Basic 工程师和会把 C# 念成「C 井」的工程师，会把 C# 念成「C 井」的工程师则鄙视认为 HTML 是一种程序语言的设计师。</p>
<p>用 Python 3 的工程师鄙视还在用 Python 2 的工程师，用 Python 2 的工程师鄙视遇到 UnicodeEncodeError 的工程师。</p>
<p>写 iOS 的工程师鄙视写 Android 的工程师，写 Android 的工程师鄙视写 Windows Phone 的工程师。</p>
<p>有 Swift 一年经验的工程师鄙视有 Objective-C 五年经验的工程师，写 Objective-C 的工程师鄙视用 PhoneGap 包装成 native app 的工程师。</p>
<p>用 React.js 的工程师鄙视用 AngularJS 的工程师，用 AngularJS 的工程师鄙视用 jQuery 的工程师，用 jQuery 的工程师鄙视用 Vanilla JavaScript  的工程师，用 Vanilla JavaScript 的工程师鄙视 IE 的使用者。</p>
<p>会用 debugger 的工程师鄙视用 assert 的工程师，用 assert 的工程师鄙视只会 print () 的工程师；用 console.log () 来 debug 的工程师鄙视用 alert () 来 debug 的工程师。</p>
<p>写 Ruby on Rails 的工程师鄙视所有使用其他语言的工程师。</p>
<p>什么？你说 Ruby？Ruby 只是 Ruby on Rails 的一套框架，才不是什么程序语言呢！</p>
<p>所有的工程师都鄙视 PHP 工程师。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/11/16/disdain-chain/" data-id="cka5femk9001kgbu46afmbtl5" class="article-share-link" data-share="baidu" data-title="程序员鄙视链">分享到</a>
      

      

      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-convention-over-configuration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/convention-over-configuration/" class="article-date">
  <time datetime="2018-11-15T08:47:58.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/convention-over-configuration/">设计范式 - 约定优于配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>约定优于配置（convention over configuration）</strong>，也称作按约定编程，是一种软件设计范式，旨在减少软件开发人员需做决定的数量，获得简单的好处，而又不失灵活性。</p>
<p>本质是说，开发人员仅需规定应用中不符约定的部分。例如，如果模型中有个名为Sale的类，那么数据库中对应的表就会默认命名为sales。只有在偏离这一约定时，例如将该表命名为”products_sold”，才需写有关这个名字的配置。</p>
<p>如果您所用工具的约定与你的期待相符，便可省去配置；反之，你可以配置来达到你所期待的方式。</p>
<h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>设计不好的框架通常需要多个配置文件，每一个都有许多设置。这些配置文件为每一个项目提供信息说明从URL到将类映射到数据库表的各种信息。大量包含太多参数的配置文件通常是过度复杂的应用设计的指标（代码坏味道）。</p>
<p>例如，在知名的Java对象关系映射框架Hibernate的早期版本中，将类及其属性映射到数据库上需要是在XML文件中的描述，其中大部分信息都应能够按照约定得到，如将类映射到同名的数据库表，将属性分别映射到表上的字段。后续的版本抛弃了XML配置文件，而是使用这些恰当的约定，对于不符合这些约定的情形，可以使用Java 标注来说明（参见下面提供的JavaBeans规范）</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>许多新的框架使用了约定优于配置的方法，包括：Spring，Ruby on Rails，Kohana PHP，Grails，Grok，Zend Framework，CakePHP，symfony，Maven，ASP.NET MVC，Web2py（MVC），Apache Wicket。</p>
<p>这是一个古老的概念, 甚至在Java类库中也可以找出这一概念的踪迹。例如，JavaBean规范非常多的依赖这一概念。下面摘录JavaBeans 1.1版规范的一段：</p>
<blockquote>
<p>按照一般的规则，我们不希望造出一个奇怪的java.beans.everything类，其他类需要从该类派生。而是希望在运行时JavaBeans为一般的对象提供缺省的行为特征，但是允许对象通过继承特定的java.beans.something接口来覆盖缺省的行为特征的一部分。</p>
</blockquote>
<p>Maven约定的项目结构如下图： </p>
<p><img src="img/20150206174437078.jpg" alt="20150206174437078"></p>
<p>只需配置很少的信息，Maven就可以自动完成编译、测试和打包等工作。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/11/15/convention-over-configuration/" data-id="cka5femk50012gbu4dwp74f2t" class="article-share-link" data-share="baidu" data-title="设计范式 - 约定优于配置">分享到</a>
      

      

      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Programming-paradigm/" rel="tag">Programming paradigm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/" rel="tag">编程范式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-set-multiple-language-with-laravel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/set-multiple-language-with-laravel/" class="article-date">
  <time datetime="2018-11-15T06:22:35.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/set-multiple-language-with-laravel/">Laravel站点多语言部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="部署多语言支持的Laravel-项目，主要有以下三件事情需要做："><a href="#部署多语言支持的Laravel-项目，主要有以下三件事情需要做：" class="headerlink" title="部署多语言支持的Laravel 项目，主要有以下三件事情需要做："></a>部署多语言支持的Laravel 项目，主要有以下三件事情需要做：</h2><ol>
<li>增加可以用的 locales </li>
<li>在所有路由前加上语言前缀</li>
<li>增加一个中间件，用来检查当前是否用了一个合法的 locale</li>
</ol>
<h3 id="第一步-添加可用的语言信息"><a href="#第一步-添加可用的语言信息" class="headerlink" title="第一步,  添加可用的语言信息"></a>第一步,  添加可用的语言信息</h3><p>打开 config/app.php  ，增加如下格式的内容， ‘locale’ =&gt; ‘xx’</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locales =&gt; [<span class="string">'en'</span>=&gt;<span class="string">'English'</span>, <span class="string">'zh'</span>=&gt;<span class="string">'Chinese'</span>],</span><br></pre></td></tr></table></figure>

<h3 id="第二部，给路由增加前缀"><a href="#第二部，给路由增加前缀" class="headerlink" title="第二部，给路由增加前缀"></a>第二部，给路由增加前缀</h3><p>为了给路由增加前缀，我们修改 App/Providers/RouteServiceProvider.php 中的 map 方法，修改内容如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">map</span><span class="params">(Router $router, Request $request)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $locale = $request-&gt;segment(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;app-&gt;setLocale($locale);</span><br><span class="line">    $router-&gt;group([<span class="string">'namespace'</span> =&gt; <span class="keyword">$this</span>-&gt;namespace, <span class="string">'prefix'</span> =&gt; $locale], <span class="function"><span class="keyword">function</span><span class="params">($router)</span> 	</span>&#123;</span><br><span class="line">    <span class="keyword">require</span> app_path(<span class="string">'Http/routes.php'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然，不要忘记在文件顶部引入命名空间：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Routing</span>\<span class="title">Router</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br></pre></td></tr></table></figure>

<h3 id="第三步-增加语言控制中间件"><a href="#第三步-增加语言控制中间件" class="headerlink" title="第三步 增加语言控制中间件"></a>第三步 增加语言控制中间件</h3><p>在app/Http/Middleware目录下，创建一个名为 Language.php 的中间件，内容如下:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Middleware</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Closure</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Routing</span>\<span class="title">Redirector</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Application</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Routing</span>\<span class="title">Middleware</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Language</span> <span class="keyword">implements</span> <span class="title">Middleware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Application $app, Redirector $redirector, Request $request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;app = $app;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;redirector = $redirector;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;request = $request;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Handle an incoming request.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  \Closure  $next</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">($request, Closure $next)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Make sure current locale exists.</span></span><br><span class="line">    $locale = $request-&gt;segment(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( ! array_key_exists($locale, <span class="keyword">$this</span>-&gt;app-&gt;config-&gt;get(<span class="string">'app.locales'</span>))) &#123;</span><br><span class="line">        $segments = $request-&gt;segments();</span><br><span class="line">        $segments[<span class="number">0</span>] = <span class="keyword">$this</span>-&gt;app-&gt;config-&gt;get(<span class="string">'app.fallback_locale'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;redirector-&gt;to(implode(<span class="string">'/'</span>, $segments));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;app-&gt;setLocale($locale);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $next($request);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，把这个中间件在 app/Http/Kernel.php 中注册，并确保他是第一个。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">protected</span> $middleware = [</span><br><span class="line"><span class="string">'App\Http\Middleware\Language'</span>,</span><br><span class="line"><span class="string">'Illuminate\Foundation\Http\Middleware\CheckForMaintenanceMode'</span>,</span><br><span class="line"><span class="string">'Illuminate\Cookie\Middleware\EncryptCookies'</span>,</span><br><span class="line"><span class="string">'Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse'</span>,</span><br><span class="line"><span class="string">'Illuminate\Session\Middleware\StartSession'</span>,</span><br><span class="line"><span class="string">'Illuminate\View\Middleware\ShareErrorsFromSession'</span>,</span><br><span class="line"><span class="string">'Illuminate\Foundation\Http\Middleware\VerifyCsrfToken'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>然后就ok了，试一下。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/11/15/set-multiple-language-with-laravel/" data-id="cka5femll005rgbu4glyg5i0e" class="article-share-link" data-share="baidu" data-title="Laravel站点多语言部署">分享到</a>
      

      

      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Laravel/" rel="tag">Laravel</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-laravel-markdown-editor" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/laravel-markdown-editor/" class="article-date">
  <time datetime="2018-11-13T02:19:19.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/laravel-markdown-editor/">laravel-markdown-editor</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="Editor-md-主要特性"><a href="#Editor-md-主要特性" class="headerlink" title="Editor.md 主要特性"></a>Editor.md 主要特性</h4><ul>
<li>支持“标准”Markdown / CommonMark和Github风格的语法，也可变身为代码编辑器；</li>
<li>支持实时预览、图片（跨域）上传、预格式文本/代码/表格插入、代码折叠、搜索替换、只读模式、自定义样式主题和多语言语法高亮等功能；</li>
<li>支持ToC（Table of Contents）、Emoji表情、Task lists、@链接等Markdown扩展语法；</li>
<li>支持TeX科学公式（基于KaTeX）、流程图 Flowchart 和 时序图 Sequence Diagram;</li>
<li>支持识别和解析HTML标签，并且支持自定义过滤标签解析，具有可靠的安全性和几乎无限的扩展性；</li>
<li>支持 AMD / CMD 模块化加载（支持 Require.js &amp; Sea.js），并且支持自定义扩展插件；</li>
<li>兼容主流的浏览器（IE8+）和Zepto.js，且支持iPad等平板设备；</li>
<li>支持自定义主题样式；</li>
</ul>
<p>Github下载地址：<a href="https://github.com/pandao/editor.md" target="_blank" rel="noopener">https://github.com/pandao/editor.md</a></p>
<h4 id="前端js配置"><a href="#前端js配置" class="headerlink" title="前端js配置"></a>前端js配置</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* 配置editormd */</span></span><br><span class="line"> <span class="keyword">var</span> editor = editormd(<span class="string">"editormd"</span>, &#123;</span><br><span class="line">      path: <span class="string">"&#123;&#123; asset('/editor.md/lib/') &#125;&#125;"</span>,</span><br><span class="line">      height: <span class="number">700</span>,</span><br><span class="line">      syncScrolling: <span class="string">"single"</span>,</span><br><span class="line">      toolbarAutoFixed: <span class="keyword">false</span>,</span><br><span class="line">      saveHTMLToTextarea: <span class="keyword">false</span>,</span><br><span class="line">      imageUpload: <span class="keyword">true</span>,</span><br><span class="line">      imageFormats : [<span class="string">"jpg"</span>,<span class="string">"jpeg"</span>,<span class="string">"gif"</span>,<span class="string">"png"</span>,<span class="string">"bmp"</span>,<span class="string">"webp"</span>],</span><br><span class="line">      imageUploadURL:<span class="string">"&#123;&#123;url('backend/uploadimage')&#125;&#125;"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="方法和路由"><a href="#方法和路由" class="headerlink" title="方法和路由"></a>方法和路由</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadimage</span><span class="params">(Request $request)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $message=<span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;disk-&gt;exists(<span class="string">'/article'</span>)) &#123;</span><br><span class="line">            $message = <span class="string">"article 文件夹不存在,请先创建"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $pathDir=date(<span class="string">'Ymd'</span>);</span><br><span class="line">            <span class="keyword">if</span>(!<span class="keyword">$this</span>-&gt;disk-&gt;exists(<span class="string">'/article/'</span>.$pathDir))&#123;</span><br><span class="line">                <span class="keyword">$this</span>-&gt;disk-&gt;makeDirectory(<span class="string">'/article/'</span>.$pathDir);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>($request-&gt;file(<span class="string">'editormd-image-file'</span>))&#123;</span><br><span class="line">            $path=<span class="string">"uploads/article/"</span>.$pathDir;</span><br><span class="line">            $pic = $request-&gt;file(<span class="string">'editormd-image-file'</span>);</span><br><span class="line">            <span class="keyword">if</span>($pic-&gt;isValid())&#123;</span><br><span class="line">                $newName=md5(time() . rand(<span class="number">0</span>, <span class="number">10000</span>)).<span class="string">"."</span>.$pic-&gt;getClientOriginalExtension();</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;disk-&gt;exists($path.<span class="string">'/'</span>.$newName))&#123;</span><br><span class="line">                    $message = <span class="string">"文件名已存在或文件已存在"</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>($pic-&gt;move($path,$newName))&#123;</span><br><span class="line">                        $url = asset($path.<span class="string">'/'</span>.$newName);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        $message=<span class="string">"系统异常，文件保存失败"</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $message = <span class="string">"文件无效"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $message=<span class="string">"Not File"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $data = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'success'</span> =&gt; <span class="keyword">empty</span>($message) ? <span class="number">1</span> : <span class="number">0</span>,  <span class="comment">//1：上传成功  0：上传失败</span></span><br><span class="line">            <span class="string">'message'</span> =&gt; $message,</span><br><span class="line">            <span class="string">'url'</span> =&gt; !<span class="keyword">empty</span>($url) ? $url : <span class="string">''</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        header(<span class="string">'Content-Type:application/json;charset=utf8'</span>);</span><br><span class="line">        <span class="keyword">exit</span>(json_encode($data));</span><br><span class="line">    &#125;</span><br><span class="line">Route::group([<span class="string">'prefix'</span> =&gt; <span class="string">'backend'</span>], <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  Route::post(<span class="string">'uploadimage'</span>,[<span class="string">'uses'</span>=&gt;<span class="string">'Backend\UploadController@uploadimage'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="上传报错"><a href="#上传报错" class="headerlink" title="上传报错"></a>上传报错</h4><p>我们可以发现会出现500错误，这是由Laravel 的TokenMismatchException异常导致的，也就是Laravel默认开启了防CSRF，而Editor.md 的上传表单中并没有包含token，所以才会出现这个错误。</p>
<h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>当我们点击上传图片的时候会弹出上传框，这个就是上传的表单，我们可以用调试器查出这是请求了image-dialog.js，具体路径为editor.md/plugins/image-dialog/image-dialog.js。我们可以对其中的var dialogContent变量进行就修改。</p>
<p>具体的修改代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (settings.crossDomainUpload)</span><br><span class="line">&#123;</span><br><span class="line">     action += <span class="string">"&amp;callback="</span> + settings.uploadCallbackURL + <span class="string">"&amp;dialog_id=editormd-image-dialog-"</span> + guid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> csrfToken = $(<span class="string">'meta[name="_token"]'</span>).attr(<span class="string">'content'</span>);</span><br><span class="line"><span class="keyword">var</span> csrfField = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span> (csrfToken) &#123;</span><br><span class="line">       csrfField = <span class="string">"&lt;input type='hidden' name='_token' value='"</span> + csrfToken + <span class="string">"' /&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在if(settings.crossDomainUpload)结束后加上这5行代码，接下来，将csrfField 变量加入到下面的代码中。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dialogContent = ( (settings.imageUpload) ? <span class="string">"&lt;form action=\""</span> + action + <span class="string">"\" target=\""</span> + iframeName + <span class="string">"\" method=\"post\" enctype=\"multipart/form-data\" class=\""</span> + classPrefix + <span class="string">"form\"&gt;"</span> : <span class="string">"&lt;div class=\""</span> + classPrefix + <span class="string">"form\"&gt;"</span> ) +</span><br><span class="line">    ( (settings.imageUpload) ? <span class="string">"&lt;iframe name=\""</span> + iframeName + <span class="string">"\" id=\""</span> + iframeName + <span class="string">"\" guid=\""</span> + guid + <span class="string">"\"&gt;&lt;/iframe&gt;"</span> : <span class="string">""</span> ) +</span><br><span class="line">    <span class="string">"&lt;label&gt;"</span> + imageLang.url + <span class="string">"&lt;/label&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;input type=\"text\" data-url /&gt;"</span> + (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (settings.imageUpload) ? <span class="string">"&lt;div class=\""</span> + classPrefix + <span class="string">"file-input\"&gt;"</span> +</span><br><span class="line">            <span class="string">"&lt;input type=\"file\" name=\""</span> + classPrefix + <span class="string">"image-file\" accept=\"image/*\" /&gt;"</span> +</span><br><span class="line"></span><br><span class="line">            csrfField +</span><br><span class="line"></span><br><span class="line">            <span class="string">"&lt;input type=\"submit\" value=\""</span> + imageLang.uploadButton + <span class="string">"\" /&gt;"</span> +</span><br><span class="line">            <span class="string">"&lt;/div&gt;"</span> : <span class="string">""</span>;</span><br><span class="line">    &#125;)() +</span><br><span class="line">    <span class="string">"&lt;br/&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;label&gt;"</span> + imageLang.alt + <span class="string">"&lt;/label&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;input type=\"text\" value=\""</span> + selection + <span class="string">"\" data-alt /&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;br/&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;label&gt;"</span> + imageLang.link + <span class="string">"&lt;/label&gt;"</span> +</span><br><span class="line">    <span class="string">"&lt;input type=\"text\" value=\"http://\" data-link /&gt;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"&lt;br/&gt;"</span> + csrfField +</span><br><span class="line"></span><br><span class="line">    ( (settings.imageUpload) ? <span class="string">"&lt;/form&gt;"</span> : <span class="string">"&lt;/div&gt;"</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>然后在请求的页面头部加上这行代码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">"_token"</span> content=<span class="string">"&#123;&#123; csrf_token() &#125;&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>这样再次请求上传图片就可以把token带过去。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/11/13/laravel-markdown-editor/" data-id="cka5femkt0039gbu458854hs9" class="article-share-link" data-share="baidu" data-title="laravel-markdown-editor">分享到</a>
      

      

      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/development/" rel="tag">development</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/laravel/" rel="tag">laravel</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-event-driven-programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/10/event-driven-programming/" class="article-date">
  <time datetime="2018-10-10T03:27:17.000Z" itemprop="datePublished">2018-10-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/10/event-driven-programming/">事件驱动编程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="何为事件驱动编程"><a href="#何为事件驱动编程" class="headerlink" title="何为事件驱动编程"></a>何为事件驱动编程</h3><p>在我们深入事件驱动应用之前，我们先看一下在维基百科里对事件驱动编程的定义:</p>
<blockquote>
<p>事件驱动编程是一种编程模式，其中的程序流由诸如用户动作（鼠标点击，按键）、传感器输出或来自其他程序/线程的消息等事件来决定确定。事件驱动编程是图形用户界面和其他应用程序（例如JavaScript Web应用程序）中使用的主要范例，用于执行某些操作来响应用户输入。</p>
</blockquote>
<p>事件驱动应用程序会响应用户的动作，然后执行对应的代码来响应用户的动作。</p>
<h3 id="Laravel-Events"><a href="#Laravel-Events" class="headerlink" title="Laravel Events"></a>Laravel Events</h3><p>通过上面的定义，事件是发生在应用程序中的动作。<code>Javascript</code>的事件是像鼠标点击、鼠标悬浮、按下键盘这样的用户动作。在Laravel中事件是发生在应用程序中的动作，像邮件通知、记录日志、用户注册、CRUD操作等。<code>Laravel Events</code>系统提供了简易的观察者模式实现，让开发者能够订阅和监听发生在应用中的动作。</p>
<p>应用中有些事件是由Laravel框架自动发起。比如说当使用<code>Eloquent Model</code>执行create、save、update或者delete操作时Laravel将分别发起<code>created</code>、<code>saved</code>、<code>updated</code>、和<code>deleted</code>事件。如果需要的话我们可以监听这些事件从而执行相应的代码来完成自己的需求。除了Laravel框架自动发起的事件，我们还可以根据自己应用的需要让Laravel发起我们自己定义的事件。比如说你可以发起一个<code>userRegistered</code>事件，在事件处理程序中发送用户验证邮件好让新注册的用户能够验证自己的邮箱。</p>
<p>发起一个事件并不会让应用程序执行任何相应的操作，我们必须在事件处理程序中对被发起的事件进行相应地回应。<code>Laravel Events</code>由两部分组成<code>Event Handler</code>和<code>Event Listener</code>。<code>Event Handler</code>中包含了发起事件相关的信息。<code>Event Listener</code>监听事件对象并对事件进行回应，<code>Event Listener</code>是我们实现事件逻辑的地方。在Laravel中Event类文件被存放在<code>app/Events</code>目录，Listener类文件被存放在<code>app/Listeners</code>目录。</p>
<h3 id="为何使用事件驱动编程"><a href="#为何使用事件驱动编程" class="headerlink" title="为何使用事件驱动编程"></a>为何使用事件驱动编程</h3><p>我们已经了解事件驱动应用和<code>Laravel Events</code>的概念了，你可能会好奇为什么要采用事件驱动这种方法来构建你的应用程序。我们来看一下事件驱动编程带来的收益。</p>
<p>首先，事件是一种解耦应用程序各个方面的好方法，因为单个事件可以有多个不依赖于彼此的监听器。通过解耦，不会因为你使用了不适合域逻辑的代码而污染了代码库。其次，由于应用程序是松散耦合的，你可以轻松扩展应用程序的功能，而不必打乱/重写应用程序或应用程序的某些其他功能。</p>
<h3 id="应用示例"><a href="#应用示例" class="headerlink" title="应用示例"></a>应用示例</h3><p>现在假设新用户注册了我们的应用程序后，应用程序会给用户发送一封欢迎邮件，同时会自动给用户订阅应用上的每周新闻简报。在不应用事件驱动方式的情况下代码往往是如下这样:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// without event-driven approach</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span><span class="params">(Request $request)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// validate input</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;validate($request-&gt;all(), [</span><br><span class="line">      <span class="string">'name'</span> =&gt; <span class="string">'required'</span>,</span><br><span class="line">      <span class="string">'email'</span> =&gt; <span class="string">'required|unique:users'</span>,</span><br><span class="line">      <span class="string">'password'</span> =&gt; <span class="string">'required|min:6|confirmed'</span>,</span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create user and persist in database</span></span><br><span class="line">    $user = <span class="keyword">$this</span>-&gt;create($request-&gt;all());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// send welcome email</span></span><br><span class="line">    Mail::to($user)-&gt;send(<span class="keyword">new</span> WelcomeToSiteName($user));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sign user up for weekly newsletter</span></span><br><span class="line">    Newsletter::subscribe($user-&gt;email, [</span><br><span class="line">      <span class="string">'FNAME'</span>: $user-&gt;fname,</span><br><span class="line">      <span class="string">'LNAME'</span>: $user-&gt;lname</span><br><span class="line">    ], <span class="string">'SiteName Weekly'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// login newly registered user</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;guard()-&gt;login($user);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">'/home'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以看到发送欢迎邮件和订阅新闻简报的逻辑紧密耦合到了<code>register</code>方法里， 根据<a href="https://baike.baidu.com/item/%E5%85%B3%E6%B3%A8%E7%82%B9%E5%88%86%E7%A6%BB" target="_blank" rel="noopener">关注点分离原则</a>，<code>register</code>方法不应该关心发送欢迎邮件和订阅新闻简报的具体实现。你可能会觉得发送欢迎邮件和订阅新闻放到<code>register</code>方法里也没什么，但是如果在注册时除了发送邮件还要给用户发送短信呢？继续写在<code>register</code>方法里：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span><span class="params">(Request $request)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// validate input</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// create user and persist in database</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// send welcome email</span></span><br><span class="line">    Mail::to($user)-&gt;send(<span class="keyword">new</span> WelcomeToSiteName($user));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// send SMS</span></span><br><span class="line">    Nexmo::message()-&gt;send([</span><br><span class="line">      <span class="string">'to'</span> =&gt; $user-&gt;phone_number,</span><br><span class="line">      <span class="string">'from'</span> =&gt; <span class="string">'SiteName'</span>,</span><br><span class="line">      <span class="string">'text'</span> =&gt; <span class="string">'Welcome and thanks for signup on SiteName.'</span></span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sign user up for weekly newsletter</span></span><br><span class="line">    Newsletter::subscribe($user-&gt;email, [</span><br><span class="line">      <span class="string">'FNAME'</span>: $user-&gt;fname,</span><br><span class="line">      <span class="string">'LNAME'</span>: $user-&gt;lname</span><br><span class="line">    ], <span class="string">'SiteName Weekly'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// login newly registered user</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">'/home'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到代码库开始变得臃肿。现在让我们看看采用事件驱动编程方法如何实现上述相同的功能。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// with event-driven approach</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span><span class="params">(Request $request)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// validate input</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;validate($request-&gt;all(), [</span><br><span class="line">      <span class="string">'name'</span> =&gt; <span class="string">'required'</span>,</span><br><span class="line">      <span class="string">'email'</span> =&gt; <span class="string">'required|unique:users'</span>,</span><br><span class="line">      <span class="string">'password'</span> =&gt; <span class="string">'required|min:6|confirmed'</span>,</span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create user and persist in database</span></span><br><span class="line">    $user = <span class="keyword">$this</span>-&gt;create($request-&gt;all());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fire event once user has been created</span></span><br><span class="line">    event(<span class="keyword">new</span> UserRegistered($user));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// login newly registered user</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;guard()-&gt;login($user);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">'/home'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一旦创建了用户，<code>UserRegistered</code>事件就会被触发。回想一下，我们之前提到，发起一个事件后应用并不会自己做任何事情，我们需要监听<code>UserRegistered</code>事件并执行必要的操作。让我们创建<code>UserRegistered</code>事件类和<code>SendWelcomeMail</code>以及<code>SignupForWeeklyNewsletter</code>监听器类：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:event UserRegistered</span><br><span class="line">php artisan make:listener SendWelcomeMail --event=UserRegistered</span><br><span class="line">php artisan make:listener SignupForWeeklyNewsletter --event=UserRegistered</span><br></pre></td></tr></table></figure>

<p>事件和监听器之间的对应关系需要注册到EventServiceProvider的<code>$listen</code>属性里：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> $listen = [</span><br><span class="line">    UserRegistered::class =&gt; [</span><br><span class="line">        SendWelcomeMail::class,</span><br><span class="line">        SignupForWeeklyNewsletter::class,</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>打开<code>app/Events/UserRegistered.php</code>文件更新它的构造方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> $user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(User $user)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">$this</span>-&gt;user = $user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>声明$user为public，它将被传递给监听器，而监听器可以用它来执行必要的逻辑。接下来，事件监听器将在其handle方法中接收到事件实例。在handle方法中，我们可以执行响应事件的操作。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/Listeners/SendWelcomeMail.php</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">(UserRegistered $event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// send welcome email</span></span><br><span class="line">  Mail::to($event-&gt;user)-&gt;send(<span class="keyword">new</span> WelcomeToSiteName($event-&gt;user));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app/Listeners/SignupForWeeklyNewsletter.php</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">(UserRegistered $event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// Sign user up for weekly newsletter</span></span><br><span class="line">  Newsletter::subscribe($event-&gt;user-&gt;email, [</span><br><span class="line">    <span class="string">'FNAME'</span>: $event-&gt;user-&gt;fname,</span><br><span class="line">    <span class="string">'LNAME'</span>: $event-&gt;user-&gt;lname</span><br><span class="line">  ], <span class="string">'SiteName Weekly'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到通过事件驱动的方式我们让register方法的代码尽可能的少并且专注于用户注册这件事上，其它的逻辑由<code>UserRegistered</code>事件的监听器来负责，现在如果说我们想在用户注册后发送短信给新注册的用户，我们所要做的就是创建一个新的事件监听器来监听UserRegistered事件何时被触发</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:listener SendWelcomeSMS --event=UserRegistered</span><br><span class="line"></span><br><span class="line"><span class="comment">// app/Listeners/SendWelcomeSMS.php</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">(UserRegistered $event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// send SMS</span></span><br><span class="line">  Nexmo::message()-&gt;send([</span><br><span class="line">    <span class="string">'to'</span> =&gt; $event-&gt;user-&gt;phone_number,</span><br><span class="line">    <span class="string">'from'</span> =&gt; <span class="string">'SiteName'</span>,</span><br><span class="line">    <span class="string">'text'</span> =&gt; <span class="string">'Welcome and thanks for signup on SiteName.'</span></span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注：记得要更新EventServiceProvider里的$listen属性</strong></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>在这篇文章中，我们已经能够理解事件驱动的编程是什么，事件驱动的应用程序是什么以及Laravel事件是什么。我们还研究了事件驱动应用程序的优势。但是，像跟所有有积极影响的编程概念一样，它也有缺点。事件驱动型应用程序的主要缺点是让程序流变得复杂了，尤其一些刚接触开发的人可能很难真正理解应用程序的流程。以上面的实现为例，通过<code>register</code>方法我们并不能直观地看到程序在创建用户后会向新用户发送一封欢迎邮件，并将其注册到新闻通讯中。</p>
<p>所以在开发中应该根据场景创造性地使用它，利用它的优势为你的应用程序解耦，而不是过度使用它。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/10/10/event-driven-programming/" data-id="cka5femkd001ugbu4aykxa4lz" class="article-share-link" data-share="baidu" data-title="事件驱动编程">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-which-doc-should-i-read" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/31/which-doc-should-i-read/" class="article-date">
  <time datetime="2018-07-31T08:51:45.000Z" itemprop="datePublished">2018-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WEB%E5%BC%80%E5%8F%91/">WEB开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/31/which-doc-should-i-read/">看文档，还是要看官方文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>每次遇到问题，总习惯去google 一下，看看stackoverflow上有没有相似的问题，又或者会检索到一些博客，写着一些解决的思路或者经验，每次尝试照着这些东西去解决问题的时候，碰壁的概率总是大于解决问题的概率。 因为每个人的环境，版本以及个人知识覆盖方面的差异，所表表述的问题及解决办法或过于简略，或过于冗余，带入一些额外的篇幅。 渐渐地发现，那些最清晰的，篇幅控制得当的文章，还是官方文档，Nginx的问题，就去Ngixn的官网去看文档，PHP的问题，就去PHP官方文档去看，不会被带偏，这个是最重要的，</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/07/31/which-doc-should-i-read/" data-id="cka5femlw006zgbu44f1293oy" class="article-share-link" data-share="baidu" data-title="看文档，还是要看官方文档">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-ckeditor-tools-modifiy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/11/ckeditor-tools-modifiy/" class="article-date">
  <time datetime="2018-06-11T08:55:01.000Z" itemprop="datePublished">2018-06-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WEB%E5%BC%80%E5%8F%91/">WEB开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/11/ckeditor-tools-modifiy/">CKEditor 调整工具栏项目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、加载自定义配置文件</p>
<p>CKEDITOR.replace( ‘editor1’, {<br>    customConfig: ‘/custom/ckeditor_config.js’<br>});</p>
<p>  2、 修改配置文件中的ToolbarGroup项目</p>
<pre><code>config.toolbarGroups = \[


    { name: &apos;insert&apos; },
    { name: &apos;forms&apos; },
    { name: &apos;basicstyles&apos;, groups: \[ &apos;basicstyles&apos;, &apos;cleanup&apos; \] },
    { name: &apos;paragraph&apos;,   groups: \[ &apos;list&apos;, &apos;indent&apos;, &apos;blocks&apos;, &apos;align&apos;, &apos;bidi&apos; \] },
    { name: &apos;styles&apos; },
    { name: &apos;colors&apos; },

\];</code></pre>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/06/11/ckeditor-tools-modifiy/" data-id="cka5femk60019gbu4efjc6z3r" class="article-share-link" data-share="baidu" data-title="CKEditor 调整工具栏项目">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-json" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/19/mysql-json/" class="article-date">
  <time datetime="2018-01-19T02:34:44.000Z" itemprop="datePublished">2018-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/19/mysql-json/">Mysql json字段的使用与意义</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>mysql 5.7.8开始支持json字段类型,并提供了不少内置函数,通过计算列,甚至还可以直接索引json中的数据! 如果还不了解基础的可参看 <a href="http://blog.csdn.net/qq_16414307/article/details/50595255" target="_blank" rel="noopener">mysql json快速入门</a> </p>
<p>为何说json原生支持非常关键呢,不是可以自己在客户端处理json然后保存字符串到mysql不就完了? 来看一看，原生支持到底有什么意义 create table t ( id int not null, js json not null, PRIMARY KEY (id) ) </p>
<p><strong>1.可以直接过滤记录</strong> select * from t where js-&gt;’$.a’=100 避免了要将所有记录都读取出来，在客户端进行过滤。 </p>
<p><strong>2.可以直接update，而无须先读取</strong> update t set js=json_set(js,’$.a’,js-&gt;’$.a’+1) where id=1 单条原子更新 update t,t1 set t.js=json_merage(t.js,t1.js) where t.id=t1.id 跨表更新 </p>
<p><strong>3.可以在一条SQL中完成多条纪录的修改！</strong> update t set js=json_set(js,’$.a’,123) where id in(1,2) 没有原生的支持，这个是很难实现的。 </p>
<p><strong>4.通过json类型，完美的实现了表结构的动态变化</strong> 除了一般意义上的增加表字段，还包括嵌套其他对象与数组 update t set js=json_array_append(js,’$.sonAry’,123) where id =1 增加一个子节点到sonAry中，无须子表。 </p>
<p><strong>5.通过计算生成列在json上建立索引</strong> </p>
<p>CREATE TABLE j1 ( id int(11) NOT NULL, js json NOT NULL, s varchar(45) CHARACTER SET utf8mb4 NOT NULL, a int(11) GENERATED ALWAYS AS (json_extract(js,’$.a’)) STORED, PRIMARY KEY (id), KEY i_a (a) ) </p>
<p>通过a这个生成列(json_extract(js,’$.a’))上建立索引, 可以利用mysql的索引来快速定位。 json_extract还可利用path的通配符，发掘更多类型索引。 甚至还可利用JSON_CONTAINS/JSON_CONTAINS_PATH来建立索引。 </p>
<p>这里可以组合出很多 <strong>与mongodb的差异</strong> </p>
<p>1.mongodb会自动建立表 也就是可以动态增加表,这点mysql还是必须先定义表 </p>
<p>2.大部分查询插入更新操作,因为mysql json支持,两者没有什么功能差别了 但是就查询来说,mysql的SQL语法,特别是json_extract的简写模式,可读性比mongodb的要强不少</p>
<p>3.mongodb实际用牺牲事务性降低系统复杂度来实现高性能 这方面,要看用户使用场景,很难说优势还是劣势 </p>
<p>4.对于大数据的支持 mongodb在大数据支持上做的比较好,特别是数据分片,高可用上基本内置实现了 mysql这方面也在不断完善</p>
<p>其差异主要还是在一致性上的选取,弱一致性导致容易分布处理,而强一致性则复杂很多. 我们可以假设,关系数据库设计之初如果放弃强一致性,那么这方面,mongodb等nosql实际也不会有任何优势. 从未来趋势来看, 强一致性方面,传统关系数据库始终是唯一最佳选择,而且通过支持json,把以前Nosql的一些优势也可以纳入到自己体系中. 对于固定的字段,显然传统的表处理方式性能更优,而对于动态字段放置独立的json字段中,也可以很好的适应这类需求. 弱一致性方面,NoSQL更擅长一些,传统关系数据库则可以在应用层面通过多实例数据库的分布方式来实现(来降低一致性提高数据吞吐量). </p>
<p>而在大分布式方面最终一致性方面,传统关系数据库缺乏直接支持,但还是可以通过应用层来实现, 而很多NoSQL也在不断完善这方面的功能. 我们期待一个基础关系数据库,每个实例提供强一致性的事务,易用的SQL,并对动态数据作出很好的支持. 并在实例之上有一个分布式的层,可以聚合大量数据库实例,并协助用户实现最终一致性, 这样就比较完美了.</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2018/01/19/mysql-json/" data-id="cka5femky003mgbu434s2gyn5" class="article-share-link" data-share="baidu" data-title="Mysql json字段的使用与意义">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-controller-and-model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/14/controller-and-model/" class="article-date">
  <time datetime="2017-12-14T09:39:43.000Z" itemprop="datePublished">2017-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A1/">产品设计</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/14/controller-and-model/">对Controller与Model体型问题的一些想法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>相信接触过Rails的朋友们都知道<em>Skinny Controller_</em>, Fat Model_的说法 <em>Skinny Controller_</em>, Fat Model_的说法出现在各大论坛和教程，帮助了很多初入Rails者放置自己的代码。 但是这种说法未免太过简洁。 可能新手偶尔会在一些细节上混淆，产生这些代码是放在Controller好些还是Model好些的疑问。 本文<strong>并非反对</strong>这种观点，而是讨论下<strong>什么情况</strong>下Controller需要减肥。 我认为Controller并非一直都应该皮包骨头，而且有时应该属于Controller的脂肪，<strong>初入者不应该仅仅抱着一句廋Controller胖Model就随便的丢到Model里面，而应抱着求知的心态去思考问题</strong>：</p>
<ol>
<li>为什么要说胖Model,廋Controller?</li>
<li>这种说法适应于任何情况吗？</li>
</ol>
<p>1.其实了解MVC思想就很容易理解第一点。 Model是用来封装业务逻辑的，所以要尽可能的把涉及业务逻辑的代码放到Model里。 Rails提供了Model中的验证即是个很好的例子。想象下，如果验证在Controller中，当你又要在另外的Controller中调用Model时，你可能需要把Controller中的验证代码再写一遍，而且现在你发现了一个Bug,你需要在所有使用该Model的Controller中改代码！这带来的很高的维护成本和重复代码。 Controller 提供View中的数据，所以如果程序的UI逻辑发生了很大的变动,Controller也有可能随之改变，现在你采用了胖Model廋Controller这种设计方式，因为业务逻辑都在Model中，Controller仅仅是对Model的调用，我们只需要改动Controller中的几行代码即可。 2.其实我们了解了第一点即可理解这里 举个例子，说下我遇到的问题。 我需要在视图中取到多个Tag并插入数据库 在视图中我取到的是如下字符串： Controller, Model, 代码设计, 新手向 我需要将其split后分别插入数据库 经过思考后我把split和循环插入数据库的代码写在controller中 因为现在采用的是从一串字符串中截取每个Tag，但若某天我修改视图层，用Ajax来分别获取每一个Tag。 如果上述逻辑写在Model中这势必会需要修改Model。 修改了下视图，却牵扯Model。足以证明这种设计有问题，所以放在Controller才是正确的做法。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>如果说Model封装业务逻辑，那么Controller就是封装了UI逻辑。 Model更接近数据库，Controller更接近视图。 处理业务逻辑的代码应该放到Model,牵扯到UI逻辑的应该放到Controller <strong>个人简单的判断方法</strong> 如果修改View时你的代码需要随之改动，那么把它放在Controller中 除此之外尽量放在Model中 如果这样你还是无法区分的话，至少记住一句话 <em>Skinny Controller__, Fat Model</em></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2017/12/14/controller-and-model/" data-id="cka5femk3000xgbu46m2u9ij5" class="article-share-link" data-share="baidu" data-title="对Controller与Model体型问题的一些想法">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-warning-1265-data-truncated-column-status-row-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/12/warning-1265-data-truncated-column-status-row-1/" class="article-date">
  <time datetime="2017-12-12T07:52:02.000Z" itemprop="datePublished">2017-12-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/12/warning-1265-data-truncated-column-status-row-1/">Warning: 1265 Data truncated for column &#39;status&#39; at row 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>更新或者插入的数据类型或者长度与字段本身的属性不服，报这个错误的时候，status字段是enum类型的，插入一个枚举中没有的字符串，所以报错。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://tinywind.cn/2017/12/12/warning-1265-data-truncated-column-status-row-1/" data-id="cka5femlt006rgbu40w9h6hbe" class="article-share-link" data-share="baidu" data-title="Warning: 1265 Data truncated for column &#39;status&#39; at row 1">分享到</a>
      

      

      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/4/">下一页 &amp;raquo;</a>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/OOP/">OOP</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">PHP最佳实践</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROBOTC/">ROBOTC</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB%E5%BC%80%E5%8F%91/">WEB开发</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/phalcon/">phalcon</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/phalcon/WEB%E5%BC%80%E5%8F%91/">WEB开发</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A1/">产品设计</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">版本管理</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Development/" rel="tag">Development</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ERP%E7%B3%BB%E7%BB%9F/" rel="tag">ERP系统</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend/" rel="tag">Frontend</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IE%E5%85%BC%E5%AE%B9/" rel="tag">IE兼容</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/" rel="tag">Laravel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming-paradigm/" rel="tag">Programming paradigm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ROBOTC/" rel="tag">ROBOTC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/" rel="tag">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/development/" rel="tag">development</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/" rel="tag">laravel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stdClass-to-array/" rel="tag">stdClass to array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ttfb/" rel="tag">ttfb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%90%E5%8D%9A%E5%A3%AB/" rel="tag">乐博士</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E6%96%87/" rel="tag">杂文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/" rel="tag">编程范式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Database/" style="font-size: 10px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 15px;">Design Pattern</a> <a href="/tags/Development/" style="font-size: 10px;">Development</a> <a href="/tags/ERP%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">ERP系统</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/IE%E5%85%BC%E5%AE%B9/" style="font-size: 10px;">IE兼容</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/OOP/" style="font-size: 10px;">OOP</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Programming-paradigm/" style="font-size: 10px;">Programming paradigm</a> <a href="/tags/ROBOTC/" style="font-size: 10px;">ROBOTC</a> <a href="/tags/SEO/" style="font-size: 10px;">SEO</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/development/" style="font-size: 10px;">development</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/laravel/" style="font-size: 15px;">laravel</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/stdClass-to-array/" style="font-size: 10px;">stdClass to array</a> <a href="/tags/ttfb/" style="font-size: 10px;">ttfb</a> <a href="/tags/%E4%B9%90%E5%8D%9A%E5%A3%AB/" style="font-size: 10px;">乐博士</a> <a href="/tags/%E6%9D%82%E6%96%87/" style="font-size: 10px;">杂文</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 10px;">杂谈</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">笔记</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/" style="font-size: 10px;">编程范式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 20px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/05/26/auto-deploy-with-webhook/">通过GitHub的Webhook 实现推送的自动更新</a>
          </li>
        
          <li>
            <a href="/2020/05/26/upgrade-php-version/">Ubuntu升级PHP到最新版本</a>
          </li>
        
          <li>
            <a href="/2020/05/13/update-node-to-latest/">升级更新 node 版本</a>
          </li>
        
          <li>
            <a href="/2020/05/13/npm-error-caused-by-node/">node版本导致的 npm 报错</a>
          </li>
        
          <li>
            <a href="/2020/05/13/github-api-with-php-curl/">PHP 调用 Github API(v3)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://tinywind.cn" target="_blank">vex中文社区</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Nathan<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>





<script src="/js/script.js"></script>


</div>
</body>
</html>
